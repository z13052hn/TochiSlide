<!DOCTYPE html>
<html>
  <head>

    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0px; padding: 0px }
      #map { height: 100% }
    </style>

    <script src="http://maps.google.com/maps/api/js?v=3&sensor=false&key=<%=@GOOGLEMAP_KEYi1%>"
        type="text/javascript" charset="UTF-8"></script>

    <script type="text/javascript">
    //<![CDATA[

    var map;
    
    // 初期化。bodyのonloadでinit()を指定することで呼び出してます
    function init() {

      // Google Mapで利用する初期設定用の変数
 
     var latlng = new google.maps.LatLng(4.477856485570586, 114.63134765625);


      var opts = {
        zoom: 10,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: latlng
      };

      // getElementById("map")の"map"は、body内の<div id="map">より
      map = new google.maps.Map(document.getElementById("map"), opts);

      google.maps.event.addListener(map, 'click', mylistener);
    }

    function mylistener(event) {
      document.getElementById("show_lat").innerHTML = event.latLng.lat();
      document.getElementById("show_lng").innerHTML = event.latLng.lng();
      location.href = "index?lat=" + event.latLng.lat() + "&lng=" + event.latLng.lng();
    }

    //]]>
    </script>
  </head>

  <body onload="init()">
   
    <center>
    <h1>Welcome to TochiSlide Hotline</h1>
    <div id="map" style="height:500px; width:500px"></div>
    <h2 font-size="20">time:<%= @time %></h2>
    <table border="1" cellspacing="0">
    <tr><th>LAT</th><td id="show_lat"></td></tr>
    <tr><th>LNG</th><td id="show_lng"></td></tr>
    <tr><th>LAT</th><td><%= @result["coord"]["lat"]%></td></tr>
    <tr><th>LNG</th><td><%= @result["coord"]["lon"]%></td></tr>
    <tr><th>country</th><td><%= @result["sys"]["country"]%></td></tr>
    <tr><th>city</th><td><%= @result["name"]%></td></tr>
    <tr><th>weather</th><td><%= @result["weather"][0]["main"]%></td></tr>
    </table>
    </center>
  </body>

</html>
